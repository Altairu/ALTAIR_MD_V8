# ALTAIR_MD_V8
**High-Power Isolated Motor Driver Board**

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">NEWもたどら <a href="https://t.co/xIfIAs8RRS">pic.twitter.com/xIfIAs8RRS</a></p>&mdash; -Altair- (@Flying___eagle) <a href="https://twitter.com/Flying___eagle/status/2016806401205797079?ref_src=twsrc%5Etfw">January 29, 2026</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

## 概要 (Overview)
**ALTAIR_MD_V8** は、STMicroelectronics製の車載用高出力フルブリッジドライバー **VNH5019A-E** を搭載したDCモータードライバーモジュールです。

制御信号ラインにデジタルアイソレータ (**ADuM121N**) を採用することで、モーター駆動系（24V系）とマイコン制御系（3.3V/5V系）のGNDを完全に分離（絶縁）しています。

## 特徴 (Features)
*   **高出力駆動**: 連続12A / 最大30A の大電流駆動が可能（VNH5019A-E仕様に基づく）。
*   **完全絶縁設計**: Analog Devices製 デジタルアイソレータ ADuM121N を採用し、ロジック側とパワー側のGNDを分離。
*   **広範囲なロジック電圧**: 1.8V ～ 5V のロジック入力に対応（マイコンを選ばない設計）。
*   **保護機能**:
    *   過電圧・低電圧シャットダウン
    *   過熱保護 (Thermal Shutdown)
    *   電流センシング機能 (Current Sense Output)

## 仕様 (Specifications)

| 項目 | 仕様 | 備考 |
| :--- | :--- | :--- |
| **メインドライバー** | STMicroelectronics VNH5019A-E | AEC-Q100準拠 (車載グレード) |
| **絶縁素子** | Analog Devices ADuM121N | 2ch デジタルアイソレータ (計2個使用) |
| **入力電源電圧** | DC 5.5V ～ 24V | パワー側電源 (VCC/VBAT) |
| **ロジック入力電圧** | DC 1.8V ～ 5.5V | マイコン側I/O電圧 |
| **最大出力電流** | 連続 12A / ピーク 30A | 放熱条件に依存 |
| **電流センシング** | アナログ電圧出力 | 1.5kΩ抵抗接続時 (約0.14V/A) |

## 回路図 (Schematic)

![Circuit Diagram](images/image-1.png)

### 主な構成
*   **絶縁回路**: マイコンからの制御信号（PWM1, PWM2, ENABLE）は、ADuM121N を介して VNH5019A-E に伝送されます。
*   **電源生成**: 24V入力からオンボードの降圧レギュレータにより、絶縁二次側（ドライバー側）用の5V電源を生成しています。
*   **保護設定**:
    *   **CP (Charge Pump)**: オープン（未接続）
    *   **VBAT**: VCCと短絡（逆接保護MOSFETなし構成のため）
  
## PCB Layout

![PCB Layout](images/image.png)

## インターフェース (Interface)

### 入力ピン (CN1 / マイコン側)
| ピン名 | 機能 | 説明 |
| :--- | :--- | :--- |
| **PWM1** | INA 入力 | モーター回転方向制御 A (正転/逆転) |
| **PWM2** | INB 入力 | モーター回転方向制御 B (正転/逆転) |
| **SD** | 動作許可 (PWM Pin) | **HIGH**: 動作許可, **LOW**: フリーラン停止 (全OFF) |
| **GND** | ロジックGND | マイコン側のGNDと接続 |

### 出力ピン (CN2 / モーター・電源側)
| ピン名 | 機能 | 説明 |
| :--- | :--- | :--- |
| **+24V** | 電源入力 (+) | モーター用メイン電源 (最大24V) |
| **GND_P** | パワーGND (-) | 電源およびモーターのグラウンド |
| **OUT A** | モーター出力 A | モーターの端子へ接続 |
| **OUT B** | モーター出力 B | モーターの端子へ接続 |
| **CS** | 電流センス出力 | 電流値に応じたアナログ電圧を出力 (ADCで読取可) |

## 制御ロジック (Truth Table)

VNH5019A-E の仕様に基づく真理値表です。
**SD (Shutdown/Enable)** ピンが HIGH の時のみモーターが駆動します。

| SD (Enable) | PWM1 (INA) | PWM2 (INB) | OUT A | OUT B | 動作モード |
| :---: | :---: | :---: | :---: | :---: | :--- |
| **L** | X | X | OPEN | OPEN | **フリーラン停止 (All OFF)** |
| **H** | **H** | **L** | **H** | **L** | **正転 (CW)** |
| **H** | **L** | **H** | **L** | **H** | **逆転 (CCW)** |
| **H** | **L** | **L** | **L** | **L** | **ブレーキ (GNDショート)** |
| **H** | **H** | **H** | **H** | **H** | **ブレーキ (VCCショート)** |

*   速度制御を行う場合は、回転方向に応じて PWM1 または PWM2 に PWM信号を入力し、もう片方を LOW にしてください。
*   惰性走行させたい場合は、SDピンを LOW にしてください。

## 電流センシング (Current Sense)
CSピンからは、モーター電流に比例した電流が出力されます。基板上の 1.5kΩ 抵抗により電圧に変換されています。

*   **計算式**: $V_{CS} \approx \frac{I_{OUT}}{K} \times 1.5k\Omega$
*   **K係数**: Typ. 7000 (VNH5019A-E datasheet)
*   **目安**: モーター電流 1A あたり 約 0.21V の出力

## 組み立て・使用上の注意
1.  **電源投入順序**: 
    ロジック回路(ADuM121N)は一次側・二次側両方に電源が必要です。+24V電源を投入することで二次側5Vが生成され、システムが動作可能になります。
2.  **放熱**:
    30A近い電流を流す場合、IC底面の放熱パッド（ヒートスラッグ）への熱設計が重要です。必要に応じてヒートシンクや強制空冷を行ってください。
3.  **配線**:
    電源ラインとモーター出力ラインは、大電流が流れるため可能な限り太く短い配線を使用してください。

